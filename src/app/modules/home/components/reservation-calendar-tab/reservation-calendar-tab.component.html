<mat-card>
  <div class="calendar">
    <header class="calendar__header">
      <form class="calendar__options" [formGroup]="filterGroup">
        <button mat-button (click)="calendar.refresh()" type="button">
          <mat-icon>refresh</mat-icon> Refresh
        </button>
        <mat-checkbox color="primary" formControlName="highlightMine"
          >Highlight your reservations</mat-checkbox
        >
        <mat-form-field>
          <mat-label>Physical resource</mat-label>
          <mat-select
            #resourceSelect
            formControlName="resource"
            (valueChange)="calendar.fetchReservations()"
          >
            <mat-option>
              <ngx-mat-select-search
                formControlName="resourceFilter"
                placeholderLabel="Search..."
                noEntriesFoundLabel="No resources found"
              ></ngx-mat-select-search>
            </mat-option>
            <mat-option
              *ngFor="let resource of filteredResources"
              [value]="resource.id"
            >
              {{ resource.name }}
            </mat-option>
          </mat-select>
        </mat-form-field>
      </form>

      <section class="calendar__navigation">
        <app-calendar-view-selection
          [selectedView]="calendar.view"
          (viewSelected)="calendar.view = $event"
        ></app-calendar-view-selection>

        <h1 class="calendar__view-date">
          {{ calendar.viewDate | calendarDate: calendar.view + "ViewTitle" }}
        </h1>

        <app-calendar-paginator
          [view]="calendar.view"
          [viewDate]="calendar.viewDate"
          (viewDateChange)="calendar.viewDate = $event"
        ></app-calendar-paginator>
      </section>
    </header>

    <app-reservation-calendar
      #calendar
      [selectedResourceId]="resourceSelect.value"
    ></app-reservation-calendar>
  </div>
</mat-card>
